<!doctype html>
<meta charset="UTF-8"> 
<html>
  <head>
    <title>Patterns</title>

    <!-- Smartphone Browser -->
    <meta name="viewport" content="user-scalable=no"/>

    <!-- see https://0.s3.envato.com/files/144700183/index.html for usage documentation -->
    <link rel="stylesheet" type="text/css" href="include/jcolor.min.css">
    <script src="include/jquery2.1.1.js"></script>
    <script src="include/jcolor.min.js"></script>

    <!-- https://bgrins.github.io/spectrum/ -->
    <script src="include/bgrins-spectrum-98454b5/spectrum.js"></script>
    <link rel="stylesheet" href="include/bgrins-spectrum-98454b5/spectrum.css" />

    <script src="include/jquery-ui.js"></script>
    <!-- CSS 
    <link rel="stylesheet" href="include/jquery-ui.css" />
    -->

    <!-- Herewith include the great *D3* library -->
    <script src="include/d3/d3.min.js"></script>

    <!-- http://mathjs.org/index.html -->
    <script src="include/math.min.js"></script>

    <script src="include/fabric.min.js"></script>



    <!-- Here's my own code... -->
    <!-- CSS -->
    <link rel="stylesheet" href="css-toolbox.css" />
    <link rel="stylesheet" href="css-common-widgets.css" />
    <link rel="stylesheet" href="css-cpot-view.css" />
    <link rel="stylesheet" href="css-cpot-edit.css" />

    <link rel="stylesheet" href="css-grids.css" />
    <link rel="stylesheet" href="css-plots.css" />
    <link rel="stylesheet" href="css-export.css" />
    <link rel="stylesheet" href="css--sandbox.css" />

    <link rel="stylesheet" href="css-gallery.css" />
    <link rel="stylesheet" href="css-gallery-zoom.css" />

    <link rel="stylesheet" href="css-motifs-view.css" />
    <link rel="stylesheet" href="css-motifs-edit.css" />
    <link rel="stylesheet" href="css-motifs-bg-svg.css" />

    <link rel="stylesheet" href="css-paintings.css" />

    <!-- JS -->
    <script src="global.js"></script>
    <script src="widgets.js"></script>
    <script src="datamodel.js"></script>
    <script src="logic.js"></script>

    <script src="cpot-view.js"></script>
    <script src="cpot-util.js"></script>
    <script src="cpot-edit.js"></script>
    <script src="cpot-edit-init.js"></script>
    <script src="grids.js"></script>
    <script src="plots.js"></script>
    <script src="plots2.js"></script>
    
    <script src="export.js"></script>

    <script src="gallery.js"></script>
    <script src="gallery-files.js"></script>
    <script src="gallery-images.js"></script>
    <script src="gallery-text.js"></script>
    <script src="gallery-slideshow.js"></script>
    <script src="gallery-zoom.js"></script>

    <script src="motifs-view.js"></script>
    <script src="motifs-edit.js"></script>
    <script src="motifs-edit-init.js"></script>
    <script src="motifs-props.js"></script>

  </head>

  <body>

    <svg id="svg-bg-fullscreen"></svg>

    <div id="backgrounds"></div>

    <div id="toast-box">Dummy Toast Text here...</div>
    
    This is the page body...
    <br>
    <a href="/samples.html">[link to samples page]</a>
    
    <!-- the cpanel DIV -->
    <div class="cpanel cpanel-main-size1" id="main">

      <!-- title bar -->
      <div id="cpanel-title-strip">
	<div class="cpanel-title" id="cpanel-title-1">Pattern Generator</div>
	<div class="cpanel-title" id="cpanel-title-2">TOOLBOX</div>

	<!-- badges (drag / hide) -->
	<div class="badge" id="cpanel-title-drag">
	  <div class="badge-content">drag</div>
	</div>

	<div class="badge" id="cpanel-title-hide">
	  <div class="badge-content">hide</div>
	</div>

      </div>

      <!-- cpanel body (i.e. content beneath the blue gradient strip -->
      <div id="cpanel-main-body">

	<div id="cpanel-main-tabs">
	  <ul>
	    <li><a href="#Tab-cpot">Colour Pots</a></li>
	    <li><a href="#Tab-cfun">Colouring Functions</a></li>
	    <li><a href="#Tab-motf">Motifs</a></li>
	    <li><a href="#Tab-grid">Grids</a></li>
	    <li><a href="#Tab-plot">Density Plots</a></li>
	    <li><a href="#Tab-paint">Density Paintings</a></li>
	    <li><a href="#Tab-patt">Patterns</a></li>
	    <li><a href="#Tab-exmp">Examples</a></li>
	    <li><a href="#Tab-optn">Options</a></li>
	    <li><a href="#Tab-tuti">Tutorial</a></li>
	  </ul>

	  <!-- == Tab: Colour Pot == -->	  
	  <div id="Tab-cpot">
	    <div id="colour-pots-view">
	      <table class="user-data-table" id="view-cp-table">
		<thead>
		  <tr>
		    <th class="col-1">#</th>
		    <th class="col-2">Description</th>
		    <th class="col-3">Preview</th>
		  </tr>
		</thead>
		<tbody>
		  <!-- rows populated using JS -->
		</tbody>
	      </table>

	      <div class="preview-container chequer" id="main-cp-view"></div>

	      <div id="cp-view-table-buttons">
		<div class="button" id="edit">Edit</div>
		<div class="button" id="duplicate">Duplicate</div>
		<div class="button" id="delete">Delete</div>
	      </div>

	      <div class="action-link" id="c-pot-view-rerandomise">re-randomise preview</div>

	    </div>








	    <!-- == Sub-tab: Colour Pot Edit == -->
	    <div id="colour-pots-edit" style="display: none;">

	      <!-- 1. [cp-edit] Title Bar -->
	      <input class="cpot-title plain-cell" />

	      
	      <!-- 2. [cp-edit] Table -->
	      <table class="user-data-table" id="edit-cp-table">
		<thead>
		  <tr>
		    <th class="col-1">#</th>
		    <th class="col-2">Prob</th>
		    <th class="col-3">Item</th>
		  </tr>
		</thead>
		<tbody>
		</tbody>
	      </table>


	      <!-- 3. [cp-edit] Table Bottom -->
	      <div id="cp-edit-beneath-table">

		<!-- 3.2 [cp-edit] Table Actions -->
		<div id="cp-edit-actions">

		  <div class="mini-text" id="probs-sum">
		    <span>Probs sum:</span>
		    <span id="sum" class="A">x</span> (<span id="delta" class="A">x</span>)
		  </div>

		  <div class="dropdown summing plain">
		    <button class="dropbtn">Summing Tools</button>
		    <div class="dropdown-content">
		      <a href="#" id="delta-to-selection">sum to 100% (adjust selected)</a>
		      <a href="#" id="sum100">sum to 100% (rescale all)</a>
		      <a href="#" id="all-eq">sum to 100% (all equal)</a>
		    </div>
		  </div>

		  <div class="dropdown elem-type plain">
		    <button class="dropbtn">Solid (non-static)</button>
		    <div class="dropdown-content">
		      <a id="conv-to-solid" href="#">Solid</a>
		      <a id="conv-to-range" href="#">Range</a>
		      <a href="#">Convert to non-static</a>
		    </div>
		  </div>

		  
		    <!-- 3.2 These are going into the dropdown menu!
		    [<div class="action-link" id="all-eq">all eq</div>]
		    [<div class="action-link" id="delta-to-selection">ap-r</div>]
		    <div class="action-link" id="sum100">make sum to 100%</div>


		  <div id="solid-v-range" class="act-mutex">
		    Type:<div>Solid</div><div>Range</div>
		  </div>
		    -->

		</div>

		<!-- 3.1 [cp-edit] Table Buttons -->
		<div id="cp-edit-table-buttons">
		  <div class="button s" id="add">Add <div id="A"></div><div id="B"></div></div>
		  <div class="button s" id="delete">Delete</div>
		</div>

	      </div>


	      <!-- 4. [cp-edit] Pot preview -->
	      <div id="preview-area">
		<div class="preview-container chequer"></div>
		<div class="action-link" id="re-randomise">re-randomise</div>
		<div class="action-link" id="expand">expand</div>
	      </div>

	      <!-- 5. [cp-edit] Slider -->
	      <div id="cp-edit-slider">style this slider!</div>


	      <!-- 7. [cp-edit] Cancel/Done Buttons -->
	      <div id="cp-edit-buttons">
		<div class="button" id="cancel">Cancel</div>
		<div class="button" id="done">Done</div>
	      </div>


	      <!-- 8. [cp-edit] Row Colour changing Pane -->
	      <div id="cp-edit-colour">

		
		<!-- 8.1 [cp-edit] BGrins Picker: the actual DOM content for this is shared between Solid & Range... -->
		<div id="bgrins-container" class="cpanel">
		  <input id="bgrins-colour-picker" />

		  <div id="bgrins-actions">
		    <div id="normal-large" class="act-mutex">
		      <div>Normal</div><div>Large</div>
		    </div>
		    <div id="hex-rgb-hsl" class="act-mutex">
		      Code:<div>Hex</div><div>RGB</div><div>HSL</div>
		    </div>
		  </div>

		  <div id="bgrins-buttons">
		    <div class="button s" id="cancel">Cancel</div>
		    <div class="button s" id="choose">Choose</div>
		  </div>

		</div>
		
		<!-- 8.2 [cp-edit] Pane for Solid changing -->
		<div id="cp-edit-solid">

		  <div class="colour-sun l"></div>

		  <div class="sld hue">Hue:
		    <input class="plain-cell"/>
		  </div>

		  <div class="sld sat">Saturation:
		    <input class="plain-cell"/>
		  </div>

		  <div class="sld lum">Luminosity:
		    <input class="plain-cell"/>
		  </div>

		  <div id="k2">
		    <div id="strip"></div>
		    <div class="chequer"></div>
		  </div>

		  <div class="sld alp">Alpha:
		    <input class="plain-cell"/>
		  </div>

		</div>

		<!-- 8.3 [cp-edit] Pane for Range changing (class 's' for small!)-->
		<div id="cp-edit-tabs" class="s">
		  <ul>
		    <li><a href="#tabs-e1">Central</a></li>
		    <li><a href="#tabs-e2">Boundaries</a></li>
		    <li><a href="#tabs-e3">More</a></li>
		  </ul>

		  <!-- 8.3.1 - Tab E1 -->	  
		  <!-- CP-Range editor interface - Part 1 of 3: Range->Central -->
		  <div class="boxie s no-title" id="tabs-e1">

		    <div class="Ln1">
		      <div class="text">Central Colour:</div>		      
		      <div class="colour-sun s"></div>
		    </div>

		    <div class="Ln hue">
		      <div class="name"></div>
		      <div class="mid">
			Mid:<input class="plain-cell s"/>
		      </div>
		      <div class="var">
			Rng:<input class="plain-cell s"/>
		      </div>
		      <div class="view">
			<div class="chequer"></div>
			<div class="B left"></div>
			<div class="B center"></div>
			<div class="B right"></div>
		      </div>
		    </div>

		  </div>


		  <!-- 8.3.2 - Tab E2 -->
		  <!-- CP-Range editor interface - Part 2 of 3: Range->Boundaries -->
		  <div class="boxie s no-title" id="tabs-e2">

		    <div class="colour-block c1">
		      <div class="text">Colour 1:</div>
		      <div class="colour-sun m"></div>
		      <div class="view">
			<div class="chequer"></div>
			<div class="B"></div>
		      </div>
		    </div>

		    <div class="colour-block c2">
		      <div class="text">Colour 2:</div>
		      <div class="colour-sun m"></div>
		      <div class="view">
			<div class="chequer"></div>
			<div class="B"></div>
		      </div>
		    </div>

		    <div class="colour-bar chequer">
		      <div class="gradient"></div>
		    </div>

		    
		    <div class="mini-text alc" id="reverse-hue">
		      <div class="action-link">Reverse Hue</div>
		      <span>(ac)</span>
		    </div>
		    
		    <div class="mini-text alc" id="permute-sla">
		      <div class="action-link">Permute SLA</div>
		      <span>(4)</span>
		    </div>

		  </div>

		  <!-- 8.3.3 - Tab E3 -->
		  <!-- CP-Range editor interface - Part 3 of 3: Range->More -->
		  <div class="boxie s no-title" id="tabs-e3">
		    <div id="space-1d-4d" class="act-mutex">
		      Draw from:<div>1D line</div><div>4D space</div>
		    </div>
		  </div>

		</div>

		
	      </div>
	    </div>
	  </div>


	  <!-- == Tab: Colouring Functions == -->
	  <div id="Tab-cfun">
	    Colouring Functions Tab Placeholder
	  </div>


	  <!-- == Tab: Motifs == -->
	  <div id="Tab-motf">

	    <div id="motifs-view">
	      <table class="user-data-table">
		<thead>
		  <tr>
		    <th class="col-1">#</th>
		    <th class="col-2">Title</th>
		    <th class="col-3">D.</th>
		    <th class="col-4">Prev.</th>
		  </tr>
		</thead>
		<tbody>
		  <!-- rows populated using JS -->
		</tbody>
	      </table>

	      <div class="preview">
		<div class="title">My Motif 2</div>
		<div class="pic-box">
		  <img src="site-graphics/example-motif-1.png">
		</div>
	      </div>

	      <div class="table-buttons">
		<div class="button s" id="delete">Delete</div>
		<div class="button s" id="new">New</div>
		<div class="button s" id="duplicate">Dupl.</div>
		<div class="button s" id="edit">Edit</div>
	      </div>

	      <!-- zone 1 -->
	      <div class="boxie s mot-1">
		<div class="title">Stats</div>

		<div class="mini-text">
		  In Motif: How many shapes? How many colours?
		</div>
	      </div>

	      <div class="mot-M">
		<!-- zone 2 (middle chunk)-->
		<div class="boxie s mot-2">
		  <div class="title">Colour Pots used</div>

		  <div class="mini-text">
		    Autumn leaves [re-randomise]
		  </div>
		</div>

		<!-- zone 3 (middle chunk) -->
		<div class="boxie s mot-3">
		  <div class="title">Input Parameters</div>

		  <div class="mini-text">
		    K01 - animate <br>
		    K02 - animate <br>
		    K03 - animate
		  </div>
		</div>

		<!-- zone 4 (middle chunk) -->
		<div class="boxie s mot-4">
		  <div class="title">Random Parameters</div>

		  <div class="mini-text">
		    K01 - animate <br>
		    K02 - animate <br>
		    K03 - animate
		  </div>
		</div>

		<div class="mot-5">
		  <div id="axes-on-off" class="act-mutex">
		    Axes:<div>Off</div><div>On</div>
		  </div>
		  <div id="gridlines-on-off" class="act-mutex">
		    Gridlines:<div>Off</div><div>On</div>
		  </div>
		</div>

	      </div>

	    </div>






	  <!-- == Sub-tab: Motif-edit == -->
	    <div id="motifs-edit" style="display: none;">

	      <!-- 1. The fabric canvas, this is where it all happens! -->	  
	      <div id="Motif">
		<div class="bg-layer ly1"></div>
		<div class="bg-layer ly2"></div>
		<div class="bg-layer ly3 chequer"></div>
		<div class="bg-layer ly4">

		  <svg id="bg-axes-grid" width="399" height="399">

		    <g class="gridlines">
		      <!-- 3× cartesian grids -->		      
		      <g class="cartesian">
			<g class="small"></g>
			<g class="medium"></g>
			<g class="large"></g>
		      </g>
		      <!-- 3× polar grids -->		      
		      <g class="polar">
			<g class="small"></g>
			<g class="medium"></g>
			<g class="large"></g>
		      </g>
		    </g>

		    <g class="axes">
		      <line x1="199.5" y1="0" x2="199.5" y2="399" /> <!-- vertical -->
		      <line x1="0" y1="199.5" x2="399" y2="199.5" /><!-- horizontal -->
		    </g>

		  </svg>

		</div>

		<canvas width="399" height="399"></canvas>
		<div class="interceptor">
		  <div></div>
		</div>
	      </div>

	      <!-- 2. Parameters table -->
	      <table class="user-data-table" id="params">
		<thead>
		  <tr>
		    <th class="col-1">Identifier</th>
		    <th class="col-2">Min</th>
		    <th class="col-3">Max</th>
		  </tr>
		</thead>
		<tbody>
		  <!-- rows populated using JS -->
		</tbody>
	      </table>


	      <!-- 3. Motif elements listing and their properties -->
	      <div id="motif-props-zone">
		<div class="listing-box">
		  <div class="title">Motif elements and their properties</div>

		  <div class="contents">
		    <div class="m-elem" id="m-elem-template" style="display: none;">
		      <div class="heading-bar">
			<div class="name">(name here)</div>

			<div class="p-origin">
			  <div class="title">Placement origin</div>

			  <!-- 3.1 - Lifted from https://www.w3schools.com/css/tryit.asp?filename=trycss_dropdown_button-->
			  <div class="dropdown teal">
			    <button class="dropbtn">Top Left</button>
			    <div class="dropdown-content">
			      <a href="#">Top-Left (Cartesian)</a>
			      <a href="#">Center (Cartesian)</a>
			      <a href="#">Center (Polar)</a>
			    </div>
			  </div>
			</div>

			<div class="props-tables-vis-buttons">
			  <button id="set-1" class="sel">Pos & Size</button>
			  <button id="set-2" class="sel">Appearance</button>
			  <button id="set-3" class="sel">Repetition</button>
			  <button id="set-4" class="sel">More</button>
			</div>

			<img class="delete-m-elem" src="icons/dustbin-100.png"/>

		      </div>

		      <!-- 3.2 - the actual properties of the object, organised into tables...-->
		      <div class="content-block">

			<!-- 3.2.1 - Size & Position table-->
			<div class="props-table-chunk set-1">
			  <div class="title">Placement & Size</div>
			  <table></table>
			</div>

			<!-- 3.2.2 - Styling table-->
			<div class="props-table-chunk set-2">
			  <div class="title">Appearance</div>
			  <table></table>
			</div>


			<!-- 3.2.3 - Repetition table-->
			<div class="props-table-chunk set-3">
			  <div class="title">Repetition</div>
			  <table></table>
			</div>


			<!-- 3.2.4 - More table-->
			<div class="props-table-chunk set-4">
			  <div class="title">More Properties</div>
			  <table></table>
			</div>

		      </div>

		    </div>
		  </div>

		</div>

		<div class="props-buttons">
		  <div class="button s" id="contract">Contract All</div>
		  <div class="button s" id="expand">Expand All</div>
		  <div class="button s" id="sweep">Sweep</div>
		  <div class="button s" id="render">Render</div>
		  <div class="button s" id="render10">Render ×10</div>
		</div>

	      
	      </div>


	      <!-- 4. Title -->
	      <div class="mid-1 motif-title">

		<!-- 4.1 Column 1 - Title & Backround -->
		<input class="plain-cell" value="Henry Horse Motif"/>
		<div id="background-w-1-2-b" class="act-mutex">
		  Background:<div>white</div><div>trans.1</div><div>trans.2</div><div>black</div>
		</div>

		<!-- 4.2 Column 2 - Gridlines and Axes -->
		<div class="grids-and-axes">
		  <div id="motif-grid" class="act-mutex">
		    Gridlines:<div>Off</div><div>On</div>
		  </div>


		  <div class="dropdown plain" id="grid-settings">
		    <button class="dropbtn">Grid Settings</button>
		    <div class="dropdown-content">
		      <div>
			Grid System
		      </div>
		      <div class="btn-set system">
			<button class="cartesian">Cartesian</button>
			<button class="polar">Polar</button>
		      </div>

		      <div>
			Grid Size
		      </div>
		      <div class="btn-set size">
			<button class="small">Small
			  <div class="c-note cartesian">10px</div>
			  <div class="c-note polar">25px, 15°</div>
			</button>
			<button class="medium">Medium
			  <div class="c-note cartesian">25px</div>
			  <div class="c-note polar" >50px, 45°</div>
			</button>
			<button class="large">Large
			  <div class="c-note cartesian">50px</div>
			  <div class="c-note polar">100px, 90°</div>
			</button>
		      </div>


		      <div>
			Grid weight
			<div class="btn-set weight">
			  <button class="faint">Faint</button>
			  <button class="normal">Normal</button>
			  <button class="strong">Strong</button>
			</div>
		      </div>
		      <div id="gridlines-custom-size">
			Custom size
			<div>
			  <div class="i-note cartesian">x-spacing: </div>
			  <div class="i-note polar">radius-incr:</div>
			  <input class="plain-cell s"/>
			</div>
			<div>
			  <div class="i-note cartesian">y-spacing: </div>
			  <div class="i-note polar">angular-incr:</div>
			  <input class="plain-cell s"/>
			</div>
			<button class="reset">Reset</button>
		      </div>
		    </div>
		  </div>


		  <div id="motif-grid-lock" class="act-mutex">
		    Lock to Grid:<div>Off</div><div>On</div>
		  </div>
		  <div id="motif-axes" class="act-mutex">
		    Axes:<div>Off</div><div>On</div>
		  </div>


		</div>
		  
		<!-- 4.3  Column 3  - Mouse & ...?? -->
		<div class="mini-text">
		  <div class="mouse-coords" style="display: none;">
		    Mouse (x,y): (<span class="x">44</span>, <span class="y">44</span>)
		  </div>
		</div>
	      </div>

	      <!-- 5. Tools -->

	      <div class="boxie s mid-1 tools">

		<div class="title">Tools</div>
		<div class="shapes">

		  <div id="draw-one-many" class="act-mutex">
		    Dw:<div>one</div><div>many</div>
		  </div>

		  <div class="button sqr-but" id="shap1"><img src="icons/motif/shapes-1.png"/></div>
		  <div class="button sqr-but" id="shap2"><img src="icons/motif/shapes-2.png"/></div>
		  <div class="button sqr-but" id="shap3"><img src="icons/motif/shapes-3.png"/></div>
		  <div class="button sqr-but" id="shap4"><img src="icons/motif/shapes-4.png"/></div>
		  <div class="button sqr-but" id="shap5"><img src="icons/motif/shapes-5.png"/></div>
		</div>


		<div class="colours">

		  <div class="fill">
		    <span>Fill</span>
		    <div class="mini-picker"></div>
		  </div>
		  <div class="outl">
		    <span>Outline</span>
		    <div class="mini-picker"></div>
		  </div>

		</div>


	      </div>


	      <!-- 6. Tabs [Pane for advanced motif options...]-->

	      <div class="mid-1 tabs s">
		<ul>
		  <li><a href="#tabs-f1">Design mode</a></li>
		  <li><a href="#tabs-f2">Macros</a></li>
		  <li><a href="#tabs-f3">Patterning Controls</a></li>
		  <li><a href="#tabs-f4">Embed Motif</a></li>
		</ul>

		<!-- Tab F1 -->	  
		<div class="boxie s no-title" id="tabs-f1">
		  Design mod choice
		</div>

		<!-- Tab F2 -->	  
		<div class="boxie s no-title" id="tabs-f2">
		  Macros....
		</div>

		<!-- Tab F3 -->	  
		<div class="boxie s no-title" id="tabs-f3">
		  rotational pattern. Linear pattern
		</div>

		<!-- Tab F4 -->	  
		<div class="boxie s no-title" id="tabs-f4">
		  pick a motif to embed.....
		</div>

	      </div><!-- (end of 6. tabs)-->


	      <!-- 7. Main Buttons -->
	      <div class="main-buttons">
		<div class="button" id="cancel">Cancel</div>
		<div class="button" id="done">Done</div>
	      </div>

	    </div>


	  </div>
	  


	  <!-- == Tab: Grids == -->
	  <div id="Tab-grid">
	    
	    <!-- 1. [Grids] Table -->
	    <table class="user-data-table" id="grids-table">
	      <thead>
		<tr>
		  <th class="col-1">#</th>
		  <th class="col-2">Description</th>
		</tr>
	      </thead>
	      <tbody>
	      </tbody>
	    </table>

	    <div id="grids-buttons">
	      <div class="button" id="duplicate">Duplicate</div>
	      <div class="button" id="delete">Delete</div>
	      <div class="button" id="advanced">Advanced Grid</div>
	    </div>

	    <div id="row-content">

	      <div id="lines-v-grid" class="act-mutex">
		Grid type:<div>1D (=lines)</div><div>2D (=grid)</div>
	      </div>

	      <div class="boxie" id="line-set-1">
		<div class="title">Line Set 1</div>

		<div class="k-pix"></div>

		<div class="k-angle">Angle:<input class="plain-cell"/>
		</div>

		<div class="k-spacing">Interval:<br>
		  <input class="plain-cell"/>
		  <div class="act-mutex px-pc-qty">
		    Unit:<div>px</div><div>%</div><div>qty</div>
		  </div>
		</div>
		<div class="action-link translate">Translation</div>

	      </div>

	      <div class="boxie" id="line-set-2">
		<!-- inner html copied in dynamically -->	  
	      </div>

	      <div id="preset-grid" class="act-mutex">
		Convert to:<div>Isometric (hex)</div><div>Square</div><div>Diamond</div>
	      </div>
	      <div id="link-angles" class="act-mutex">
		Angles 1 & 2:<div>link</div><div>unlink</div>
	      </div>

	      <div id="slider-placeholder" >
		this is where I want the slider to go.
	      </div>

	      <div class="boxie s" id="preview-opts">
		<div class="title">Preview Options</div>
		<div id="show-bg" class="act-mutex">Background:<div>Hide</div><div>Show</div></div>
		<div id="show-points" class="act-mutex">Points:<div>Hide</div><div>Show</div></div>
		<div id="colour-monochrome" class="act-mutex">Gridlines:<div>Colour</div><div>Monochrome</div></div>
		<br>
		<div id="one-v-all" class="act-mutex"><div>Show Selected</div><div>Show All</div></div>

		<div id="grid-preview-visibility">
		  <div class="button" id="show">Show</div>
		  <div class="action-link" id="hide">Hide Preview</div>
		</div>

	      </div>

	    </div>	    

	    <div id="extra-content" class="cpanel">
	      <div class="k-shift">Interval-Shift:
		<input class="plain-cell"/>
	      </div>

	      <div class="k-shift">Interval-Shift:
		<input class="plain-cell"/>
	      </div>
	    </div>

	  </div>





	  <!-- == Tab: Plots == -->
	  <div id="Tab-plot">

	      <table class="user-data-table" id="plots-table">
		<thead>
		  <tr>
		    <th class="col-1">#</th>
		    <th class="col-2">Formula</th>
		    <th class="col-3">Z.&amp;R.</th>
		    <th class="col-4">Prev.</th>
		    <th class="col-5">Hist.</th>
		  </tr>
		</thead>
		<tbody>
		  <!-- rows populated using JS -->
		</tbody>
	      </table>

	      <!-- 1. buttons underneath table -->
	      <div class="zone" id="z-1">
		<div id="undr-tabl-btns">
		  <div class="button s" id="add">Add</div>
		  <div class="button s" id="delete">Delete</div>
		</div>
		<div class="action-link" id="suggestions">Suggestions</div>
		<div class="action-link" id="func-pal">Functions Palette</div>
	      </div>

	      <!-- 2. Histogram section -->
	      <div class="zone boxie s" id="z-2">
		<div class="title">Histogram</div>
		
		<div id="hist">
		  <svg id="bar-graph"></svg>
		</div>

		<div class="action-link" id="hist-flatten">Flatten</div>

		<div class="mini-text" id="hist-stats">
		  <div id="points" >Points: <span>x</span></div>
		  <div id="min"    >Min: <span>x</span></div>
		  <div id="max"    >Max: <span>x</span></div>
		  <div id="low-10" >cf-10&#37: <span>x</span></div>
		  <div id="high-10">cf-90&#37: <span>x</span></div>
		  <div id="median" >Median: <span>x</span></div>
		</div>

		<div class="mini-text" id="hist-adjust">
		  <div class="title-c">Adjust</div>
		  <div id="ops">
		    <div id="value-min">val.min: <span><input class="plain-cell s"/></span></div>
		    <div id="value-max">val.max: <span><input class="plain-cell s"/></span></div>
		    <div id="value-mid">val.mid: <span><input class="plain-cell s"/></span></div>
		    <div id="brightness">Brightn.:
		      <div>		      
			<div class="button sqr-but sm n"><span>-</span></div>
			<div class="button sqr-but sm p"><span>+</span></div>
		      </div>
		    </div>
		    <div id="contrast">Contrast:
		      <div>		      
			<div class="button sqr-but sm n"><span>-</span></div>
			<div class="button sqr-but sm p"><span>+</span></div>
		      </div>
		    </div>
		  </div>

		  <div class="lump" id="curve">FF</div>
		  <div class="action-link" id="hist-more">More</div>
		  <div class="action-link" id="hist-reset">Reset</div>

		</div>

	      </div>

	      <!-- 3. Marked-up equation and misc. options section -->
	      <div class="zone" id="z-3">
		<div class="comment" id="real">formula in real variables <strong>x</strong> and <strong>y</strong> (varied over plane)</div>
		<div class="comment" id="cplx">formula in complex variable <strong>z</strong> (varied over plane)</div>
		<div class="comment" id="invalid">Invalid formula. Not <strong>f(x,y)</strong> and not <strong>f(z)</strong>.</div>
	      </div>

	      <!-- 4. d -->
	      <div class="zone boxie s" id="z-4">
		<div class="title">Zoom&amp;Rotation</div>
		<div class="act-mutex" id="mouse-zoom">Mouse Zoom:<div>On</div><div>Off</div></div>
		<div class="act-mutex" id="lock-aspects">Aspect ratio:<div>lock</div><div>unlock</div></div>
		<div class="action-link" id="reset-zoom">Reset Zoom</div>
		<div class="action-link" id="square-axes">Square Axes</div>
		<div class="mini-text" id="more-brack">[<div class="action-link" id="more">More...</div>]</div>
		<div class="act-mutex" id="zoom-both-x-y">Zoom:<div>x, y</div><div>x only</div><div>y only</div></div>
		<div class="act-mutex" id="steps-SML">Steps:<div>S</div><div>M</div><div>L</div></div>

		<div class="mini-text" id="ztr-btns">
		  <div id="zoom">
		    <div class="b-label">Zoom:</div>
		    <div class="button sqr-but m"><span>–</span></div><div class="button sqr-but p"><span>+</span></div>
		  </div>
		  <div id="translate">
		    <div class="b-label">Translate:</div><div class="button sqr-but"><img src="icons/arrow-up-s.png"/></div><div class="button sqr-but"><img src="icons/arrow-down-s.png"/></div><div class="button sqr-but"><img src="icons/arrow-left-s.png"/></div><div class="button sqr-but"><img src="icons/arrow-right-s.png"/></div>
		  </div>
		  <div id="rotate">
		    <div class="b-label">Rotate:</div><div class="button sqr-but ac"><img src="icons/rotate-anticlockwise-s.png"/></div><div class="button sqr-but cw"><img src="icons/rotate-clockwise-s.png"/></div>
		  </div>
		</div>


	      </div>

	      <!-- 5. d -->
	      <div class="zone boxie s" id="z-5">
		<div class="mini-text">
		  <div class="title">Preview Options</div>
		  <div class="act-mutex" id="colouring">Colouring:<div>greyscale</div><div>posi-negi</div><div>heatmap</div></div>
		  <div class="act-mutex" id="cv-contours">CV-Contours:<div>Show</div><div>Hide</div></div>
		  <div id="contours">Qty.cvc:<span><input class="plain-cell s"/></div></span>
		  <div id="res-lim">res. limit: <span><input class="plain-cell s"/></div></span>
		  <div id="plot-status">
		    <div id="working" style="display: none;">
		      Working...(<span id="pc-compl">0</span><span>%</span>, <span id="res-cur">0</span><span>px</span>)
		    </div>
		    <div id="complete" style="display: none;">
		      Overall: <span id="t-overall">0</span><span>s</span> (final: <span id="t-final">0</span><span>s</span>)
		    </div>
		    <div id="aborted" style="display: none;">
		      Plotting Aborted.
		    </div>
		  </div>

		</div>

		<div class="action-link" id="clear">Clear</div>
		<div class="button" id="plot">Plot</div>
	      </div>


	  </div>



	  <!-- == Tab: Density Paintings == -->
	  <div id="Tab-paint">
	    Code here for density painting. <br>
	    There are a variety of JS-paint kinds of options online. <br>
	    The best option may well again turn out to be fabric JS, running full-screen.<br>
	    Main feature to select brush type (e.g. round brush, Gaussian brush etc.)<br>
	    Other feature ideas include (1) importing images / plots from the other page<br>
	    combination of overlapping layers by various technques (add, subtract, burn, invert)<br>
	    Options for choice of colouring function.<br>
	    <img src="site-graphics/hardsoftbrush_1.jpg">
	  </div>



	  
	  <!-- == Tab: Patterns == -->
	  <div id="Tab-patt">
	    Placeholder for "Patterns" tab. I formerly called this "layers". It's where the components get brought together.
	  </div>



	  
	  <!-- == Tab: Options == -->
	  <div id="Tab-optn">

	    <div id="ops-main">
	      With the random seed idea, a fixed random-number generator algorithm will allow the exact same image to be generated on different occasions. Neat

	    </div>

	    <!-- style="display: none;" -->
	    <div id="ops-rseed">

	      Export options here...
	      This means JSON, and a text-file download.
	      <textarea placeholder="put JSON here..." id="json-text"></textarea>

	      <div class="button" id="json-load">Load JSON</div>

	    </div>

	  </div>




	  <!-- == Tab: Examples (Gallery) == -->
	  <div id="Tab-exmp">

	    <div id="thumbs-view">

	      <div id="info">
		Here are some hand-done examples of the kinds of pattern possible. Click a thumbnail for more photos.
	      </div>

	      <div id="thumb-container">
		<div class="drawn-thumb x3">
		  <div>146-01</div>
		  <img src="hand-drawing/square-thumb/146-01b.jpg"/>
		</div>

		<div class="drawn-thumb x3">
		  <div>139-04</div>
		  <img src="hand-drawing/square-thumb/139-04a.png"/>
		</div>

		<div class="drawn-thumb x3">
		  <div>152-01</div>
		  <img src="hand-drawing/square-thumb/152-01b.jpg"/>
		</div>
	      </div>

	    </div>

	    <div id="gallery-view" style="display: none;">

	      <div id="listing-bar"></div>

	      <div id="gallery-area">
		<div id="top-section">
		  <div class="button" id="close-gallery">Close</div>
		  <div id="heading">
		    <span class="value">text1</span>
		  </div>
		  <div id="date">
		    <span class="value">text2</span>
		  </div>
		  <div id="materials">
		    <span class="prop"></span>
		    <span class="value">text3</span>
		  </div>
		  <div id="dimentions">
		    <span class="prop"></span>
		    <span class="value">text4</span>
		  </div>
		  <div id="links">
		    <span class="value">text5</span>
		  </div>
		  <div id="description">
		    <span class="prop">Comments:</span>
		    <span class="value">text5</span>
		  </div>

		  <div id="play-pause">
		    <div id="pp-icon" class="play"></div>
		    <div id="pp-fast">
		      <span></span>
		      <div class="action-link">fast</div>
		    </div>
		    <div id="pp-slow">
		      <span>*</span>
		      <div class="action-link">slow</div>
		    </div>

		    <div id="pp-runtime"></div>
		    <div class="button" id="use-pic">Set-BG</div>

		  </div>


		</div>

		<div id="img-section" class="normal">
		  <div id="panning-img-container"></div>
		  <img src="icons/magnify.png" id="magnify-icon">

		  <div id="magnify-popup" style="display: none;">
		    <div class="buttons">
		      <div class="plus big"><span>+</span></div>
		      <div class="plus small"><span>+</span></div>
		      <div class="minus small"><span>–</span></div>
		      <div class="minus big"><span>–</span></div>
		    </div>
		    <img src="icons/magnify.png">
		    <div class="click-hint">click and hold a point to drag (pan) image</div>
		    <div class="close">×</div>
		  </div>
		</div>

		<div id="bottom-section"></div>
	      </div>

	    </div>

	  </div>


	  <!-- == Tab: Tutorial== -->
	  <div id="Tab-tuti">
	    Placeholder for the user-guide / tutorial.
	  </div>





	</div>

      </div>

    </div>


    <!-- Define SVGs in the anonymous hidden div -->

    <div style="display:none;">

      <!-- 1. -->
      <svg id="svg-angle-1" width="70" height="70">

	<defs>
	  <marker id="arrow" markerWidth="10" markerHeight="10" refX="0" refY="3"
		  orient="auto" markerUnits="strokeWidth" viewBox="0 0 10 20">
	    <path d="M0,0 L0,6 L6,3 z" fill="#1c737c" />
	  </marker>
	</defs>

	<line x1="8" y1="0" x2="8" y2="70" stroke="rgba(0,0,0,0.3)" stroke-width="2"/> <!-- vertical -->
	<line x1="0" y1="62" x2="70" y2="62" stroke="rgba(0,0,0,0.3)" stroke-width="2"/><!-- horizontal -->

	<line x1="-8" y1="0" x2="53" y2="0" stroke="#1c737c" stroke-width="3" marker-end="url(#arrow)"
	      transform = "translate(8 62)" id="my_arrow"/>
      </svg>


      <!-- 2. -->
      <svg id="svg-angle-2" width="70" height="70">

	<defs>
	  <marker id="arrow" markerWidth="10" markerHeight="10" refX="0" refY="3"
		  orient="auto" markerUnits="strokeWidth" viewBox="0 0 10 20">
	    <path d="M0,0 L0,6 L6,3 z" fill="#1c737c" />
	  </marker>
	</defs>

	<line x1="8" y1="0" x2="8" y2="70" stroke="rgba(0,0,0,0.3)" stroke-width="2"/> <!-- vertical -->
	<line x1="0" y1="8" x2="70" y2="8" stroke="rgba(0,0,0,0.3)" stroke-width="2"/><!-- horizontal -->

	<line x1="-8" y1="0" x2="53" y2="0" stroke="#1c737c" stroke-width="3" marker-end="url(#arrow)"
	      transform = "translate(8 8)" id="my_arrow"/>
      </svg>


    </div>


  </body>
</html>
